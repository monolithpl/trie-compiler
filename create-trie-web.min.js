function CHR(t){return BASE64[t]}function ORD(t){return BASE64_CACHE[t]}function BitWriter(){this.init()}function BitString(t){this.init(t)}function RankDirectory(t,i,e,r,n){this.init(t,i,e,r,n)}function TrieNode(t){this.letter=t,this.final=!1,this.children=[]}function Trie(){this.init()}function FrozenTrieNode(t,i,e,r,n,o){this.trie=t,this.index=i,this.letter=e,this.final=r,this.firstChild=n,this.childCount=o}function FrozenTrie(t,i,e){this.init(t,i,e)}function lookup(t){try{new FrozenTrie(t[2],t[1],t[0]).lookup("xxxxxxx")?console.log("yes"):console.log("no")}catch(t){console.log(t)}}function createTrie(t){var i=new Trie,e=t.split("\n");e.sort();for(var r=0;r<e.length;r++)i.insert(e[r]);var n=i.encode(),o=RankDirectory.Create(n,2*i.getNodeCount()+1,L1,L2),s=[];return s.push(i.getNodeCount()),s.push(o.getData()),s.push(n),JSON.stringify(s)}var BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",W=6,BASE64_CACHE={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"-":62,_:63},L1=1024,L2=32;BitWriter.prototype={init:function(){this.bits=[]},write:function(t,i){for(var e=i-1;e>=0;e--)t&1<<e?this.bits.push(1):this.bits.push(0)},getData:function(){for(var t=[],i=0,e=0,r=0;r<this.bits.length;r++)i=i<<1|this.bits[r],(e+=1)===W&&(t.push(CHR(i)),e=i=0);return e&&t.push(CHR(i<<W-e)),t.join("")},getDebugString:function(t){for(var i=[],e=0,r=0;r<this.bits.length;r++)i.push(""+this.bits[r]),++e===t&&(i.push(" "),e=0);return i.join("")}},BitString.MaskTop=[63,31,15,7,3,1,0],BitString.BitsInByte=[0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],BitString.prototype={init:function(t){this.bytes=t,this.length=this.bytes.length*W},getData:function(){return this.bytes},get:function(t,i){if(t%W+i<=W)return(ORD(this.bytes[t/W|0])&BitString.MaskTop[t%W])>>W-t%W-i;var e=ORD(this.bytes[t/W|0])&BitString.MaskTop[t%W],r=W-t%W;for(t+=r,i-=r;i>=W;)e=e<<W|ORD(this.bytes[t/W|0]),t+=W,i-=W;return i>0&&(e=e<<i|ORD(this.bytes[t/W|0])>>W-i),e},count:function(t,i){for(var e=0;i>=8;)e+=BitString.BitsInByte[this.get(t,8)],t+=8,i-=8;return e+BitString.BitsInByte[this.get(t,i)]},rank:function(t){for(var i=0,e=0;e<=t;e++)this.get(e,1)&&i++;return i}},RankDirectory.Create=function(t,i,e,r){for(var n=new BitString(t),o=0,s=0,h=0,a=0,u=Math.ceil(Math.log(i)/Math.log(2)),c=Math.ceil(Math.log(e)/Math.log(2)),l=new BitWriter;o+r<=i;)a+=n.count(o,r),o+=r,(s+=r)===e?(h+=a,l.write(h,u),a=0,s=0):l.write(a,c);return new RankDirectory(l.getData(),t,i,e,r)},RankDirectory.prototype={init:function(t,i,e,r,n){this.directory=new BitString(t),this.data=new BitString(i),this.l1Size=r,this.l2Size=n,this.l1Bits=Math.ceil(Math.log(e)/Math.log(2)),this.l2Bits=Math.ceil(Math.log(r)/Math.log(2)),this.sectionBits=(r/n-1)*this.l2Bits+this.l1Bits,this.numBits=e},getData:function(){return this.directory.getData()},rank:function(t,i){if(0===t)return i-this.rank(1,i)+1;var e=0,r=i,n=0;return r>=this.l1Size&&(n=(r/this.l1Size|0)*this.sectionBits,e=this.directory.get(n-this.l1Bits,this.l1Bits),r%=this.l1Size),r>=this.l2Size&&(n+=(r/this.l2Size|0)*this.l2Bits,e+=this.directory.get(n-this.l2Bits,this.l2Bits)),e+=this.data.count(i-i%this.l2Size,i%this.l2Size+1)},select:function(t,i){for(var e=this.numBits,r=-1,n=-1;e-r>1;){var o=(e+r)/2|0,s=this.rank(t,o);s===i?(n=o,e=o):s<i?r=o:e=o}return n}},Trie.prototype={init:function(){this.previousWord="",this.root=new TrieNode(" "),this.cache=[this.root],this.nodeCount=1},getNodeCount:function(){return this.nodeCount},insert:function(t){for(var i=0,e=0;e<Math.min(t.length,this.previousWord.length)&&t[e]===this.previousWord[e];e++)i+=1;this.cache.length=i+1;var r=this.cache[this.cache.length-1];for(e=i;e<t.length;e++){var n=new TrieNode(t[e]);this.nodeCount++,r.children.push(n),this.cache.push(n),r=n}r.final=!0,this.previousWord=t},apply:function(t){for(var i=[this.root];i.length>0;){for(var e=i.shift(),r=0;r<e.children.length;r++)i.push(e.children[r]);t(e)}},encode:function(){var t=new BitWriter;t.write(2,2),this.apply(function(i){for(var e=0;e<i.children.length;e++)t.write(1,1);t.write(0,1)});var i="a".charCodeAt(0);return this.apply(function(e){var r=e.letter.charCodeAt(0)-i;" "==e.letter&&(r=26),","==e.letter&&(r=27),"'"==e.letter&&(r=28),"-"==e.letter&&(r=29),e.final&&(r|=32),t.write(r,6)}),t.getData()}},FrozenTrieNode.prototype={getChildCount:function(){return this.childCount},getChild:function(t){return this.trie.getNodeByIndex(this.firstChild+t)}},FrozenTrie.prototype={init:function(t,i,e){this.data=new BitString(t),this.directory=new RankDirectory(i,t,2*e+1,L1,L2),this.letterStart=2*e+1},getNodeByIndex:function(t){var i=1===this.data.get(this.letterStart+6*t,1),e=String.fromCharCode(this.data.get(this.letterStart+6*t+1,5)+"a".charCodeAt(0));"{"==e&&(e=" "),"|"==e&&(e=","),"}"==e&&(e="'"),"~"==e&&(e="-");var r=this.directory.select(0,t+1)-t;return new FrozenTrieNode(this,t,e,i,r,this.directory.select(0,t+2)-t-1-r)},getRoot:function(){return this.getNodeByIndex(0)},lookup:function(t){for(var i=this.getRoot(),e=0;e<t.length;e++){for(var r,n=0;n<i.getChildCount()&&(r=i.getChild(n)).letter!==t[e];n++);if(n===i.getChildCount())return!1;i=r}return i.final}};